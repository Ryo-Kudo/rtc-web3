"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t=require("react"),n=(e=t)&&"object"==typeof e&&"default"in e?e.default:e;function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e}).apply(this,arguments)}function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var a=function(e){var l=e.children,r=t.useState("object"==typeof window),a=r[0],i=r[1],u=typeof window;return t.useEffect((function(){window&&i(!0)}),[u]),a?l:n.createElement(n.Fragment,null)},i=function(e){var l,a;function i(l){var r;return(r=e.call(this,l)||this).state={hasError:!1},r.playerRef=t.createRef(),r.videoProps={crossOrigin:"anonymous",playsInline:!0,controls:!0,src:"string"==typeof r.props.src?r.props.src:r.props.src[0].url,children:n.createElement(n.Fragment,null,r.props.subtitles&&r.props.subtitles.length>0&&r.props.subtitles.map((function(e,t){return n.createElement("track",{key:e.lang,kind:"subtitles",srcLang:e.lang,label:e.language,src:e.url,default:0===t})})))},r}return a=e,(l=i).prototype=Object.create(a.prototype),l.prototype.constructor=l,r(l,a),i.getDerivedStateFromError=function(){return{hasError:!0}},i.prototype.render=function(){return this.state.hasError?n.createElement("div",{className:"tuby-container"},this.props.renderer?this.props.renderer(this.playerRef,this.videoProps):n.createElement("video",Object.assign({ref:this.playerRef},this.videoProps))):this.props.children},i}(t.Component),u=function(e){try{var t=new Date(0);t.setSeconds(e);var n=t.toISOString().slice(11,19);return n.startsWith("00:0")?n.slice(4):n.startsWith("00")?n.slice(3):n}catch(e){return"0:00"}},c=function(){var e,t;return/iPhone|iPad|iPod|Android/i.test(null==(e=window)||null==(t=e.navigator)?void 0:t.userAgent)},s=function(){return n.createElement("svg",{className:"tuby-progress",viewBox:"25 25 50 50"},n.createElement("circle",{cx:"50",cy:"50",r:"20"}))},o=function(e){var l=e.children,r=e.onClickAway,a=t.useRef(null);return t.useEffect((function(){var e=function(e){a.current&&!a.current.contains(e.target)&&r()};return window.addEventListener("click",e),function(){return window.removeEventListener("click",e)}}),[r]),n.createElement(n.Fragment,null,l(a))},m=function(e){var t=l({},e);return n.createElement("svg",Object.assign({viewBox:"0 0 50 50",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),n.createElement("path",{d:"M44.1242 27.4467C44.2208 26.6625 44.2852 25.8469 44.2852 25C44.2852 24.1531 44.2208 23.3689 44.1242 22.5533L49.5331 18.4128C50.016 18.0364 50.1448 17.3777 49.8228 16.8131L44.6715 8.15558C44.3818 7.62233 43.6735 7.40276 43.1262 7.62233L36.7192 10.1317C35.3992 9.12798 33.9504 8.31242 32.3728 7.68507L31.4069 1.03513C31.3425 0.439147 30.7952 0 30.1513 0H19.8487C19.2048 0 18.6897 0.439147 18.5931 1.03513L17.6272 7.68507C16.0818 8.31242 14.633 9.15935 13.2808 10.1317L6.87385 7.62233C6.29432 7.40276 5.61822 7.62233 5.32846 8.15558L0.17715 16.8131C-0.144806 17.3463 0.0161725 18.0364 0.466912 18.4128L5.87578 22.5533C5.7792 23.3375 5.7148 24.1844 5.7148 25C5.7148 25.8156 5.7792 26.6311 5.87578 27.4467L0.466912 31.5872C-0.0160232 31.9636 -0.144806 32.6223 0.17715 33.187L5.32846 41.8444C5.61822 42.3777 6.32652 42.5972 6.87385 42.3777L13.2808 39.8683C14.6008 40.872 16.0496 41.6876 17.6272 42.3149L18.5931 48.9649C18.6575 49.5609 19.2048 50 19.8487 50H30.1513C30.7952 50 31.3103 49.5609 31.4069 48.9649L32.3728 42.3149C33.9182 41.6876 35.367 40.8407 36.7192 39.8683L43.1262 42.3777C43.7057 42.5972 44.3818 42.3777 44.6715 41.8444L49.8228 33.187C50.1126 32.6537 49.9838 31.9636 49.5331 31.5872L44.1242 27.4467V27.4467ZM25 33.7516C20.0419 33.7516 15.9852 29.8306 15.9852 24.9686C15.9852 20.138 20.0097 16.1857 25 16.1857C29.9581 16.1857 34.0148 20.1067 34.0148 24.9686C34.0148 29.7992 29.9903 33.7516 25 33.7516Z",fill:"white"}))},f=function(e){var t=l({},e);return n.createElement("svg",Object.assign({viewBox:"0 0 50 50",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),n.createElement("path",{d:"M12.5 12.5H0V18.75H18.75V0H12.5V12.5Z",fill:"white"}),n.createElement("path",{d:"M37.5 12.5V1.14441e-05H31.25V18.75H50V12.5H37.5Z",fill:"white"}),n.createElement("path",{d:"M31.25 50H37.5V37.5H50V31.25H31.25V50Z",fill:"white"}),n.createElement("path",{d:"M0 37.5H12.5V50H18.75V31.25H0V37.5Z",fill:"white"}))},d=function(e){var t=l({},e);return n.createElement("svg",Object.assign({viewBox:"0 0 50 50",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),n.createElement("path",{d:"M0 18.75H6.25V6.25H18.75V0H0V18.75Z",fill:"white"}),n.createElement("path",{d:"M31.25 0V6.25H43.75V18.75H50V0H31.25Z",fill:"white"}),n.createElement("path",{d:"M43.75 43.75H31.25V50H50V31.25H43.75V43.75Z",fill:"white"}),n.createElement("path",{d:"M6.25 31.25H0V50H18.75V43.75H6.25V31.25Z",fill:"white"}))},v=function(e){var t=l({},e);return n.createElement("svg",Object.assign({viewBox:"0 0 50 50",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),n.createElement("path",{d:"M5 50H17.3077V0H5V50ZM32.6923 50H45V0H32.6923V50Z",fill:"white"}))},y=function(){return n.createElement("div",{className:"tuby-fade-zoom-out tuby-effect-icon"},n.createElement(v,{className:"tuby-icon-md"}))},g=function(e){var t=l({},e);return n.createElement("svg",Object.assign({viewBox:"0 0 50 50",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),n.createElement("path",{d:"M40.9091 22.6667H22.7273V36.6667H40.9091V22.6667ZM50 41.3333V8.62C50 6.05333 47.9545 4 45.4545 4H4.54545C2.04545 4 0 6.05333 0 8.62V41.3333C0 43.9 2.04545 46 4.54545 46H45.4545C47.9545 46 50 43.9 50 41.3333ZM45.4545 41.38H4.54545V8.59667H45.4545V41.38Z",fill:"white"}))},b=function(e){var t=l({},e);return n.createElement("svg",Object.assign({width:"50",height:"50",viewBox:"0 0 26 26",fill:"#FFFFFF",xmlns:"http://www.w3.org/2000/svg"},t),n.createElement("path",{d:"M3 1V25L23 13L3 1Z"}))},E=function(){return n.createElement("div",{className:"tuby-fade-zoom-out tuby-effect-icon"},n.createElement(b,{className:"tuby-icon-md"}))},p=function(e){var t=l({},e);return n.createElement("svg",Object.assign({viewBox:"0 0 50 50",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),n.createElement("path",{d:"M48.9536 8.08584C50.3488 9.53131 50.3488 11.8672 48.9536 13.3127L20.3806 42.9159C18.9854 44.3614 16.7308 44.3614 15.3357 42.9159L1.04604 28.1143C-0.34868 26.6688 -0.34868 24.3329 1.04604 22.8875C2.44098 21.442 4.70227 21.442 6.09744 22.8875L17.7577 35.0641L43.9087 8.08584C45.3039 6.63805 47.5585 6.63805 48.9536 8.08584Z",fill:"#fff"}))},h=function(e){var t=l({},e);return n.createElement("svg",Object.assign({viewBox:"0 0 50 50",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),n.createElement("path",{d:"M40 5.875L21.4575 25L40 44.125L34.2915 50L10 25L34.2915 0L40 5.875Z",fill:"white"}))},w=function(e){var t=l({},e);return n.createElement("svg",Object.assign({viewBox:"0 0 50 50",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),n.createElement("path",{d:"M10 44.125L28.5425 25L10 5.875L15.7085 0L40 25L15.7085 50L10 44.125Z",fill:"white"}))},C=function(e){var t=l({},e);return n.createElement("svg",Object.assign({viewBox:"0 0 50 50",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),n.createElement("path",{d:"M33.3333 40.5294H50V43.3529H33.3333V40.5294ZM22.2222 40.5294H0V43.3529H22.2222V49H25V43.3529V40.5294V34.8824H22.2222V40.5294ZM30.5556 15.1176H33.3333V9.47059V6.64706V1H30.5556V6.64706H0V9.47059H30.5556V15.1176ZM41.6667 6.64706V9.47059H50V6.64706H41.6667ZM8.33333 32.0588H11.1111V26.4118V23.5882V17.9412H8.33333V23.5882H0V26.4118H8.33333V32.0588ZM19.4444 26.4118H50V23.5882H19.4444V26.4118Z",fill:"white"}))},V=function(e){var t=l({},e);return n.createElement("svg",Object.assign({viewBox:"0 0 50 50",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),n.createElement("path",{d:"M8.33333 30.5556V19.4444C8.33333 17.9167 9.58333 16.6667 11.1111 16.6667H19.4444C20.9722 16.6667 22.2222 17.9167 22.2222 19.4444V22.2222H18.0556V20.8333H12.5V29.1667H18.0556V27.7778H22.2222V30.5556C22.2222 32.0833 20.9722 33.3333 19.4444 33.3333H11.1111C9.58333 33.3333 8.33333 32.0833 8.33333 30.5556ZM30.5556 33.3333H38.8889C40.4167 33.3333 41.6667 32.0833 41.6667 30.5556V27.7778H37.5V29.1667H31.9444V20.8333H37.5V22.2222H41.6667V19.4444C41.6667 17.9167 40.4167 16.6667 38.8889 16.6667H30.5556C29.0278 16.6667 27.7778 17.9167 27.7778 19.4444V30.5556C27.7778 32.0833 29.0278 33.3333 30.5556 33.3333ZM47.2222 2.77778H2.77778V47.2222H47.2222V2.77778ZM50 0V50H0V0.0277778C0 -2.58701e-08 -2.58701e-08 0 0.0277778 0H50Z",fill:"white"}))},k=function(e){var t=l({},e);return n.createElement("svg",Object.assign({viewBox:"0 0 50 50",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),n.createElement("path",{d:"M20 15V35L35 25L20 15ZM10.75 7.5L9.25 5.5C13 2.5 17.5 0.5 22.5 0L22.75 2.5C18.25 3 14.25 4.75 10.75 7.5ZM7.5 10.75L5.5 9.25C2.5 13 0.5 17.5 0 22.5L2.5 22.75C3 18.25 4.75 14.25 7.5 10.75ZM7.5 39.25C4.75 35.75 3 31.5 2.5 27.25L0 27.5C0.5 32.5 2.5 37 5.5 41L7.5 39.25ZM22.75 47.5C18.25 47 14.25 45.25 10.75 42.5L9.25 44.5C13 47.5 17.5 49.5 22.5 50L22.75 47.5ZM50 25C50 12 40.25 1.5 27.5 0L27.25 2.5C38.75 3.75 47.5 13.25 47.5 25C47.5 36.75 38.75 46.25 27.25 47.5L27.5 50C40.5 48.75 50 38 50 25Z",fill:"white"}))},H=function(e){var l=e.settingsActive,r=e.src,a=e.subtitles,i=e.playbackSpeed,u=e.setPlaybackSpeed,c=e.subtitleIndex,s=e.setSubtitleIndex,o=e.quality,m=e.setQuality,f=e.internationalization,d=t.useState(0),v=d[0],y=d[1],g=t.useState("main"),b=g[0],E=g[1],H=t.useRef(null),N=t.useRef(null),L=t.useRef(null),S=t.useRef(null),M={main:H,speed:N,subtitles:L,quality:S};return t.useEffect((function(){if(M[b].current){var e=M[b].current.offsetHeight;y(e>250?250:e),M[b].current.scrollTo&&M[b].current.scrollTo(0,0)}}),[b]),n.createElement("div",{className:"tuby-settings-dialog "+(l?"tuby-show":"")},n.createElement("div",{style:{height:v},className:"tuby-settings-outer"},n.createElement("div",{ref:H,className:"tuby-settings-section tuby-settings-py "+("main"===b?"tuby-settings-translate-center":"tuby-settings-translate-left")},n.createElement("div",{onClick:function(){return E("speed")},className:"tuby-settings-item"},n.createElement("div",{className:"tuby-settings-item-left"},n.createElement(k,{className:"tuby-icon-sm"}),n.createElement("p",null,(null==f?void 0:f.settingsPlaybackSpeed)||"Playback Speed")),n.createElement(w,{className:"tuby-chevron"})),a&&n.createElement("div",{onClick:function(){return E("subtitles")},className:"tuby-settings-item"},n.createElement("div",{className:"tuby-settings-item-left"},n.createElement(V,{className:"tuby-icon-sm"}),n.createElement("p",null,(null==f?void 0:f.settingsSubtitles)||"Subtitles")),n.createElement(w,{style:{width:15,height:15}})),"string"!=typeof r&&n.createElement("div",{onClick:function(){return E("quality")},className:"tuby-settings-item"},n.createElement("div",{className:"tuby-settings-item-left"},n.createElement(C,{className:"tuby-icon-sm"}),n.createElement("p",null,(null==f?void 0:f.settingsQuality)||"Quality")),n.createElement(w,{className:"tuby-chevron"}))),n.createElement("div",{ref:N,className:"tuby-settings-section "+("speed"===b?"tuby-settings-translate-center":"tuby-settings-translate-right")},n.createElement("div",{onClick:function(){return E("main")},className:"tuby-settings-section-header"},n.createElement(h,{className:"tuby-chevron"}),n.createElement("span",null,(null==f?void 0:f.settingsPlaybackSpeed)||"Playback speed")),n.createElement("div",{className:"tuby-settings-py"},new Array(8).fill("").map((function(e,t){return 3===t?(null==f?void 0:f.settingsPlaybackSpeedNormal)||"Normal":(t+1)/4})).map((function(e,t){return n.createElement("div",{key:e,onClick:function(){u((t+1)/4),E("main")},className:"tuby-settings-item-2"},i===(t+1)/4?n.createElement(p,{className:"tuby-chevron"}):n.createElement("div",{style:{width:15,height:15}}),n.createElement("span",null,e))})))),a&&n.createElement("div",{ref:L,className:"tuby-settings-section "+("subtitles"===b?"tuby-settings-translate-center":"tuby-settings-translate-right")},n.createElement("div",{onClick:function(){return E("main")},className:"tuby-settings-section-header"},n.createElement(h,{className:"tuby-chevron"}),n.createElement("span",null,(null==f?void 0:f.settingsSubtitles)||"Subtitles")),n.createElement("div",{className:"tuby-settings-py"},n.createElement("div",{onClick:function(){s(-1),E("main")},className:"tuby-settings-item-2"},-1===c?n.createElement(p,{className:"tuby-chevron"}):n.createElement("div",{style:{width:15,height:15}}),n.createElement("span",null,(null==f?void 0:f.settingsSubtitlesOff)||"Off")),a.map((function(e,t){return n.createElement("div",{key:e.lang,onClick:function(){s(t),E("main")},className:"tuby-settings-item-2"},c===t?n.createElement(p,{className:"tuby-chevron"}):n.createElement("div",{style:{width:15,height:15}}),n.createElement("span",null,e.language))})))),"string"!=typeof r&&n.createElement("div",{ref:S,className:"tuby-settings-section "+("quality"===b?"tuby-settings-translate-center":"tuby-settings-translate-right")},n.createElement("div",{onClick:function(){return E("main")},className:"tuby-settings-section-header"},n.createElement(h,{className:"tuby-chevron"}),n.createElement("span",null,(null==f?void 0:f.settingsQuality)||"Quality")),n.createElement("div",{className:"tuby-settings-py"},r.map((function(e,t){return n.createElement("div",{key:e.quality,onClick:function(){m(t),E("main")},className:"tuby-settings-item-2"},o===t?n.createElement(p,{className:"tuby-chevron"}):n.createElement("div",{style:{width:15,height:15}}),n.createElement("span",null,"number"==typeof e.quality?e.quality+"p":e.quality))}))))))},N=function(e){var t=e.setSettingsActive,l=e.src,r=e.subtitles,a=e.playbackSpeed,i=e.setPlaybackSpeed,u=e.subtitleIndex,c=e.setSubtitleIndex,s=e.quality,o=e.setQuality,m=e.internationalization;return n.createElement("div",{onClick:function(){return t(!1)},className:"tuby-backdrop "+(e.settingsActive?"tuby-show":"")},n.createElement("div",{onClick:function(e){return e.stopPropagation()},className:"tuby-modal"},n.createElement("h1",null,(null==m?void 0:m.tooltipsSettings)||"Settings"),n.createElement("div",null,n.createElement("p",null,(null==m?void 0:m.settingsPlaybackSpeed)||"Speed"),n.createElement("select",{value:4*a-1,onChange:function(e){return i((+e.target.value+1)/4)}},new Array(8).fill("").map((function(e,t){return 3===t?(null==m?void 0:m.settingsPlaybackSpeedNormal)||"Normal":(t+1)/4})).map((function(e,t){return n.createElement("option",{key:e,value:t},e)})))),r&&n.createElement("div",null,n.createElement("p",null,(null==m?void 0:m.settingsSubtitles)||"Subtitles"),n.createElement("select",{value:u,onChange:function(e){return c(+e.target.value)}},n.createElement("option",{value:-1},(null==m?void 0:m.settingsSubtitlesOff)||"Off"),r.map((function(e,t){return n.createElement("option",{key:e.lang,onClick:function(){c(t)},value:t},e.language)})))),"object"==typeof l&&n.createElement("div",null,n.createElement("p",null,(null==m?void 0:m.settingsQuality)||"Quality"),n.createElement("select",{value:s,onChange:function(e){return o(+e.target.value)}},l.map((function(e,t){return n.createElement("option",{key:e.quality,onClick:function(){o(t)},value:t},"number"==typeof e.quality?e.quality+"p":e.quality)})))),n.createElement("div",{className:"tuby-modal-btn-container"},n.createElement("button",{style:{padding:5},onClick:function(){return t(!1)}},(null==m?void 0:m.settingsModalOff)||"OK"))))},L=function(e){var t=l({},e);return n.createElement("svg",Object.assign({viewBox:"0 0 50 50",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),n.createElement("path",{d:"M5.55556 5C2.47222 5 0 7.57143 0 10.7143V39.2857C0 42.4286 2.47222 45 5.55556 45H44.4444C47.5 45 50 42.4286 50 39.2857V10.7143C50 7.57143 47.5 5 44.4444 5H5.55556ZM22.2222 22.1429H18.0556V20.7143H12.5V29.2857H18.0556V27.8571H22.2222V30.7143C22.2222 32.2857 20.9722 33.5714 19.4444 33.5714H11.1111C9.58333 33.5714 8.33333 32.2857 8.33333 30.7143V19.2857C8.33333 17.7143 9.58333 16.4286 11.1111 16.4286H19.4444C20.9722 16.4286 22.2222 17.7143 22.2222 19.2857V22.1429ZM41.6667 22.1429H37.5V20.7143H31.9444V29.2857H37.5V27.8571H41.6667V30.7143C41.6667 32.2857 40.4167 33.5714 38.8889 33.5714H30.5556C29.0278 33.5714 27.7778 32.2857 27.7778 30.7143V19.2857C27.7778 17.7143 29.0278 16.4286 30.5556 16.4286H38.8889C40.4167 16.4286 41.6667 17.7143 41.6667 19.2857V22.1429Z",fill:"white"}))},S=function(e){var t=l({},e);return n.createElement("svg",Object.assign({viewBox:"0 0 50 50",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),n.createElement("path",{d:"M0 33.5519H11.1111L25 47.805V2.19498L11.1111 16.4481H0V33.5519ZM30.5556 13.5975V36.4025C34.6667 34.4641 37.5 30.0456 37.5 25C37.5 20.0399 34.6667 15.707 30.5556 13.5975ZM30.5556 5.87229C38.5833 8.32383 44.4444 15.9635 44.4444 25C44.4444 34.0365 38.5833 41.6762 30.5556 44.1277V50C41.6944 47.4059 50 37.2007 50 25C50 12.7993 41.6944 2.59407 30.5556 0V5.87229Z",fill:"white"}))},M=function(e){var t=l({},e);return n.createElement("svg",Object.assign({viewBox:"0 0 50 50",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),n.createElement("path",{d:"M0 34.375H14.8148L33.3333 50V0L14.8148 15.625H0V34.375ZM40.7407 12.5V37.5C46.2222 35.375 50 30.5312 50 25C50 19.5625 46.2222 14.8125 40.7407 12.5Z",fill:"white"}))},x=function(e){var t=l({},e);return n.createElement("svg",Object.assign({viewBox:"0 0 50 50",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),n.createElement("path",{d:"M37.5 25.0139C37.5 20.0945 34.6667 15.8699 30.5556 13.8132V19.9555L37.3611 26.7649C37.4444 26.209 37.5 25.6253 37.5 25.0139ZM44.4444 25.0139C44.4444 27.6265 43.8889 30.0723 42.9444 32.3513L47.1389 36.5481C48.9722 33.1017 50 29.1829 50 25.0139C50 13.1184 41.6944 3.16843 30.5556 0.667039V6.36465C38.5833 8.75487 44.4444 16.2034 44.4444 25.0139V25.0139ZM3.52778 0L0 3.50195L13.1111 16.6481H0V33.3241H11.1111L25 47.2207V28.5158L36.8056 40.328C34.9444 41.7732 32.8611 42.9127 30.5556 43.6076V49.333C34.3889 48.4714 37.8611 46.6926 40.8056 44.3024L46.4722 50L50 46.4703L25 21.4564L3.55556 0H3.52778ZM24.9722 2.75153L19.1667 8.53252L24.9722 14.3413V2.77932V2.75153Z",fill:"white"}))},Z=function(e,n){var l=t.useRef(!1);t.useEffect((function(){l.current?e():l.current=!0}),n)},F=function(e){var l,r,a,i,p=e.playerKey,h=e.src,w=e.subtitles,C=e.children,V=e.poster,k=e.seekDuration,F=void 0===k?10:k,O=e.internationalization,P=e.playerRef,R=e.pictureInPicture,j=void 0!==R&&R,I=e.keyboardShortcut,q=void 0===I||I,B=t.useState(0),A=B[0],T=B[1],z=t.useState(Number(localStorage.getItem("tuby-speed"))||1),Q=z[0],W=z[1],X=t.useState(!0),D=X[0],_=X[1],U=t.useState(!1),K=U[0],G=U[1],J=t.useState(!1),Y=J[0],$=J[1],ee=t.useState(!1),te=ee[0],ne=ee[1],le=t.useState(0),re=le[0],ae=le[1],ie=t.useState(0),ue=ie[0],ce=ie[1],se=t.useState(0),oe=se[0],me=se[1],fe=t.useState(null),de=fe[0],ve=fe[1],ye=t.useState(!1),ge=ye[0],be=ye[1],Ee=t.useState(isNaN(parseInt(localStorage.getItem("tuby-volume")))?100:Number(localStorage.getItem("tuby-volume"))),pe=Ee[0],he=Ee[1],we=t.useState(Boolean(Number(localStorage.getItem("tuby-muted")))),Ce=we[0],Ve=we[1],ke=t.useState(!0),He=ke[0],Ne=ke[1],Le=t.useState(!1),Se=Le[0],Me=Le[1],xe=t.useRef(null),Ze=P||xe,Fe=t.useRef(null),Oe=t.useRef(null),Pe=t.useRef(!1),Re=t.useRef(null),je=t.useRef(null),Ie=t.useRef(null),qe=t.useRef(null),Be=t.useRef(null),Ae=function(e){Ze.current&&(Ze.current.currentTime+=e)},Te=function(){Re.current&&clearTimeout(Re.current),Ne(!0),Re.current=setTimeout((function(){Ne(!1)}),2e3)},ze=function(e){if(Ze.current&&Oe.current){var t=(e-Oe.current.getBoundingClientRect().left)/Oe.current.offsetWidth,n=(Infinity===Math.abs(t)||isNaN(t)?0:t)*Ze.current.duration;Ze.current.currentTime=n,ce(n)}},Qe=function(e){if(Ze.current&&Oe.current){var t=(e-Oe.current.getBoundingClientRect().left)/Oe.current.offsetWidth,n=(t=Infinity===Math.abs(t)||isNaN(t)?0:t)*Oe.current.offsetWidth,l=t*Ze.current.duration;isNaN(l)&&ve(null),l<0&&(l=0),ve({time:Math.round(l),offset:n})}},We=function(){var e=function(e){Qe(e.clientX),Pe.current&&ze(e.clientX)};window.addEventListener("mousemove",e);var t=function(e){var t,n,l,r;Qe(null==(t=e.touches)||null==(n=t[0])?void 0:n.pageX),Pe.current&&ze(null==(l=e.touches)||null==(r=l[0])?void 0:r.pageX)};window.addEventListener("touchmove",t),window.addEventListener("mouseup",(function(){window.removeEventListener("mousemove",e),Pe.current=!1,ve(null)})),window.addEventListener("touchend",(function(){window.removeEventListener("touchmove",t),Pe.current=!1,ve(null)}))},Xe=function(e){te?ne(!1):_((function(e){return!e})),2!==e.detail||c()||G((function(e){return!e}))};Z((function(){var e,t,n,l;Te(),Me(!0),D?null==(n=Ze.current)||n.pause():null==(l=Ze.current)||l.play(),null==(e=document)||null==(t=e.activeElement)||t.blur()}),[D]),t.useEffect((function(){Ze.current&&(Ze.current.muted=Ce,Ze.current.volume=Ce?0:pe/100),localStorage.setItem("tuby-volume",String(pe)),localStorage.setItem("tuby-muted",String(+Ce))}),[pe,Ce]),t.useEffect((function(){var e=function(){var e=document;G(!!(e.fullscreenElement||e.webkitFullscreenElement||e.webkitCurrentFullScreenElement||e.mozFullScreenElement||e.msFullscreenElement))};document.addEventListener("fullscreenchange",e),document.addEventListener("webkitfullscreenchange",e),document.addEventListener("mozfullscreenchange",e),document.addEventListener("MSFullscreenChange",e);var t=function(){e(),_(!0)},n=Ze.current;return null==n||n.addEventListener("webkitendfullscreen",t),function(){document.removeEventListener("fullscreenchange",e),document.removeEventListener("webkitfullscreenchange",e),document.removeEventListener("mozfullscreenchange",e),document.removeEventListener("MSFullscreenChange",e),null==n||n.removeEventListener("webkitendfullscreen",t)}}),[]),Z((function(){try{if(K)if(c()){var e=Ze.current,t=e.requestFullscreen||e.webkitRequestFullscreen||e.webkitRequestFullScreen||e.webkitEnterFullscreen||e.mozRequestFullScreen||e.msRequestFullscreen;null==t||t.call(e)}else{var n=Fe.current,l=n.requestFullscreen||n.webkitRequestFullscreen||n.webkitRequestFullScreen||n.webkitEnterFullscreen||n.mozRequestFullScreen||n.msRequestFullscreen;null==l||l.call(n)}else{var r=document,a=r.exitFullscreen||r.webkitExitFullscreen||r.webkitCancelFullScreen||r.mozCancelFullScreen||r.msExitFullscreen;null==a||a.call(document)}}catch(e){}Te()}),[K]),Z((function(){Ze.current&&(Ze.current.addEventListener("loadeddata",(function(){Ze.current&&ue&&(Ze.current.currentTime=ue,Ze.current.play())}),{once:!0}),Ze.current.addEventListener("error",(function(){var e;null==(e=Ze.current)||e.pause()})))}),[A]),t.useEffect((function(){Ze.current&&(localStorage.setItem("tuby-speed",String(Q)),Ze.current.playbackRate=Q)}),[Q]),t.useEffect((function(){var e=function(e){var t,n,l,r,a,i;q&&(null!=(t=Fe.current)&&t.contains(document.activeElement)&&(null==(n=document.activeElement)||n.blur()),!0!==q&&!q.pause||" "!==e.key&&"k"!==e.key||null==(l=Ie.current)||l.click(),!0!==q&&!q.rewind||"ArrowLeft"!==e.key||Ae(-F),!0!==q&&!q.forward||"ArrowRight"!==e.key||Ae(F),!0!==q&&!q.fullScreen||"f"!==e.key||null==(r=je.current)||r.click(),!0!==q&&!q.mute||"m"!==e.key||null==(a=qe.current)||a.click(),!0!==q&&!q.subtitle||"c"!==e.key||null==(i=Be.current)||i.click())},t=function(e){q&&" "===e.key&&e.preventDefault()};return window.addEventListener("keyup",e),window.addEventListener("keydown",t),function(){window.removeEventListener("keyup",e),window.removeEventListener("keydown",t)}}),[F,q]);var De={crossOrigin:"anonymous",playsInline:!0,onClickCapture:Xe,controls:!1,src:"string"==typeof h?h:h[A].url,onWaiting:function(){return $(!0)},onPlaying:function(){$(!1),_(!1)},onLoadedData:function(){var e,t;be(!0),me((null==(e=Ze.current)?void 0:e.duration)||0),t=p?Number(localStorage.getItem(p+"-time")):0,ce(t),Ze.current&&(Ze.current.currentTime=t)},onTimeUpdate:function(){var e,t,n;p&&localStorage.setItem(p+"-time",String((null==(e=Ze.current)?void 0:e.currentTime)||0)),ce((null==(t=Ze.current)?void 0:t.currentTime)||0),me((null==(n=Ze.current)?void 0:n.duration)||0)},onEnded:function(){_(!0)},onMouseMove:function(){return Te()},children:n.createElement(n.Fragment,null,w&&w.length>0&&re>=0&&ge&&n.createElement("track",{kind:"subtitles",srcLang:w[re].lang,label:w[re].language,src:w[re].url,default:!0}))};return n.createElement(n.Fragment,null,V&&!Se&&n.createElement("img",{src:V,className:"tuby-poster",alt:"Tuby Poster"}),n.createElement("div",{ref:Fe,className:"tuby-container "+(He?"tuby-controls-hovered":"")},C?C(Ze,De):n.createElement("video",Object.assign({ref:Ze},De)),(!ge&&Se||Y&&!D)&&n.createElement("div",{className:"tuby-center"},n.createElement(s,null)),D&&Se&&n.createElement("div",{className:"tuby-center",onClickCapture:Xe},n.createElement(y,null)),!D&&Se&&n.createElement("div",{className:"tuby-center",onClickCapture:Xe},n.createElement(E,null)),!Se&&n.createElement("div",{className:"tuby-center",onClickCapture:Xe},n.createElement(b,{className:"tuby-icon-md"})),n.createElement("div",{onTouchEnd:function(){return Ne(!0)},onClick:function(){return Ne(!0)},onMouseEnter:function(){return Re.current&&clearTimeout(Re.current)},className:"tuby-controls "+(D||te?"tuby-show":"")},n.createElement("div",{ref:Oe,onMouseDown:function(e){Pe.current=!0,ze(e.clientX),We()},onTouchStart:function(e){var t,n;Pe.current=!0,ze(null==(t=e.touches)||null==(n=t[0])?void 0:n.pageX),We()},onMouseMove:function(e){return Qe(e.clientX)},onMouseLeave:function(){return ve(null)},className:"tuby-seek"},n.createElement("div",{className:"tuby-seek-bar"},n.createElement("div",{style:{width:0!==oe?Math.round(ue/oe*1e3)/10+"%":0},className:"tuby-seek-left"})),null!==de&&n.createElement("div",{className:"tuby-seek-preview",style:{left:de.offset<16?0:de.offset>((null==(l=Oe.current)?void 0:l.offsetWidth)||0)-16?"auto":de.offset,right:de.offset>((null==(r=Oe.current)?void 0:r.offsetWidth)||0)-16?0:"auto",transform:de.offset<16||de.offset>((null==(a=Oe.current)?void 0:a.offsetWidth)||0)-16?"none":"translateX(-50%)"}},u(de.time))),n.createElement("div",{className:"tuby-controls-main"},n.createElement("div",{className:"tuby-controls-left"},n.createElement("button",{ref:Ie,className:"tuby-center-container tuby-tooltips-left","data-tuby-tooltips":D?(null==O?void 0:O.tooltipsPlay)||"Play (k)":(null==O?void 0:O.tooltipsPause)||"Pause (k)",onClickCapture:function(){return _((function(e){return!e}))}},n.createElement(D?b:v,{className:"tuby-icon-sm"})),n.createElement("div",{className:"tuby-volume-container"},n.createElement("button",{ref:qe,className:"tuby-center-container","data-tuby-tooltips":Ce||0===pe?(null==O?void 0:O.tooltipsUnmute)||"Unmute (m)":(null==O?void 0:O.tooltipsMute)||"Mute (m)",onClickCapture:function(){Ve(!Ce),he(0===pe?100:pe)}},n.createElement(Ce||0===pe?x:100===pe?S:M,{className:"tuby-icon-sm"})),n.createElement("div",{className:"tuby-volume-wrapper"},n.createElement("input",{className:"tuby-volume-slider",type:"range",min:0,max:100,value:Ce?0:pe,onChange:function(e){he(+e.target.value),Ve(0==+e.target.value)}}),n.createElement("div",{className:"tuby-volume-left-bar",style:{width:Ce?0:.52*pe}}))),n.createElement("div",{className:"tuby-time"},u(ue)," / ",u(oe))),n.createElement("div",{className:"tuby-controls-right"},Boolean(w)&&n.createElement("button",{ref:Be,className:"tuby-center-container "+(re>=0?"tuby-icon-underline":""),"data-tuby-tooltips":(null==O?void 0:O.tooltipsSubtitles)||"Subtitles (c)",onClickCapture:function(){return ae(re>=0?-1:0)}},n.createElement(L,{className:"tuby-icon-sm"})),n.createElement(o,{onClickAway:function(){return ne(!1)}},(function(e){return n.createElement("div",{ref:e,style:{position:"relative"}},n.createElement("button",Object.assign({className:"tuby-center-container",onClickCapture:function(){return ne((function(e){return!e}))}},te?{}:{"data-tuby-tooltips":(null==O?void 0:O.tooltipsSettings)||"Settings"}),n.createElement(m,{className:"tuby-icon-sm"})),c()?n.createElement(N,{settingsActive:te,setSettingsActive:ne,src:h,subtitles:w,playbackSpeed:Q,setPlaybackSpeed:W,subtitleIndex:re,setSubtitleIndex:ae,quality:A,setQuality:T,internationalization:O}):n.createElement(H,{settingsActive:te,setSettingsActive:ne,src:h,subtitles:w,playbackSpeed:Q,setPlaybackSpeed:W,subtitleIndex:re,setSubtitleIndex:ae,quality:A,setQuality:T,internationalization:O}))})),j&&(null==(i=document)?void 0:i.pictureInPictureEnabled)&&n.createElement("button",{className:"tuby-center-container",ref:je,"data-tuby-tooltips":"Picture in Picture",onClickCapture:function(){try{var e,t=document;null!=t&&t.pictureInPictureElement?null==t||t.exitPictureInPicture():null==(e=Ze.current)||e.requestPictureInPicture()}catch(e){}}},n.createElement(g,{className:"tuby-icon-sm"})),n.createElement("button",{className:"tuby-center-container tuby-tooltips-right",ref:je,"data-tuby-tooltips":""+(K?(null==O?void 0:O.tooltipsExitFullscreen)||"Exit full screen (f)":(null==O?void 0:O.tooltipsFullscreen)||"Full screen (f)"),onClickCapture:function(){return G((function(e){return!e}))}},n.createElement(K?f:d,{className:"tuby-icon-sm"})))))))};exports.Player=function(e){var t,r=e.dimensions,u=e.primaryColor;return n.createElement("div",{className:"tuby",style:l({},"number"==typeof r?{width:"100%",height:0,paddingBottom:r+"%"}:"object"==typeof r?{width:r.width,height:r.height}:{width:"100%",height:0,paddingBottom:"56.25%"},u?(t={},t["--tuby-primary-color"]=u,t):{})},n.createElement(a,null,n.createElement(i,Object.assign({renderer:e.children},e),n.createElement(F,Object.assign({},e)))))};
//# sourceMappingURL=react-tuby.cjs.production.min.js.map
