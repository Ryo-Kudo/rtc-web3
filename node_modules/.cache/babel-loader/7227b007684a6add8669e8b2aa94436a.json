{"ast":null,"code":"var _jsxFileName = \"/Users/ry1537/Documents/GitHub/rtc-web3/src/containers/ButtonPlayMusicRunningContainer.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from \"react\";\nimport { useAppDispatch, useAppSelector } from \"app/hooks\";\nimport { changeCurrentMediaRunning, changeStateMediaRunning, addNewIdListAudio, selectCurrentMediaRunning } from \"app/mediaRunning/mediaRunning\";\nimport iconPlaying from \"images/icon-playing.gif\";\nimport isSafariBrowser from \"utils/isSafariBrowser\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst ButtonPlayMusicRunningContainer = _ref => {\n  _s();\n\n  let {\n    className = \"\",\n    nftId,\n    renderChildren,\n    renderDefaultBtn,\n    renderLoadingBtn,\n    renderPlayingBtn\n  } = _ref;\n  const currentMediaRunning = useAppSelector(selectCurrentMediaRunning);\n  const dispatch = useAppDispatch(); // STATE\n\n  const mediaState = currentMediaRunning.state; //\n\n  useEffect(() => {\n    // check safari\n    if (!nftId || !isSafariBrowser()) {\n      return;\n    }\n\n    dispatch(addNewIdListAudio(nftId)); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [nftId]); //\n\n  const handleClickNewAudio = () => {\n    return dispatch(changeCurrentMediaRunning({\n      nftId: nftId,\n      state: \"playing\" // state: \"loading\",\n\n    }));\n  };\n\n  const handleClickNewAudioWhenMediaRunning = () => {\n    if (nftId === currentMediaRunning.nftId) {\n      return dispatch(changeCurrentMediaRunning({\n        nftId,\n        state: \"playing\"\n      }));\n    }\n\n    return dispatch(changeCurrentMediaRunning({\n      nftId,\n      state: \"playing\" // state: \"loading\",\n\n    }));\n  };\n\n  const handleClickButton = () => {\n    // PLAYING MEDIA RUNNING FOR SAFARI\n    const mediaEl = document.getElementById(nftId);\n\n    if (mediaEl) {\n      mediaEl.play();\n    } // IF NOT EXIST MEDIA\n\n\n    if (!currentMediaRunning.nftId || !currentMediaRunning.state) {\n      return handleClickNewAudio();\n    } // IF MEDIA RUNNING AND CLICK OTHER POST\n\n\n    if (currentMediaRunning.nftId !== nftId) {\n      return handleClickNewAudioWhenMediaRunning();\n    }\n\n    if (currentMediaRunning.state === \"playing\") {\n      return dispatch(changeStateMediaRunning(\"paused\"));\n    } // if (currentMediaRunning.state === \"loading\") {\n    //   return;\n    // }\n\n\n    return dispatch(changeStateMediaRunning(\"playing\"));\n  };\n\n  const _renderDefaultBtn = () => {\n    if (renderDefaultBtn) {\n      return renderDefaultBtn();\n    }\n\n    return \"Media Icon...\";\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  const _renderLoadingBtn = () => {\n    // RENDER DEFAULT IF IT NOT CURRENT\n    if (currentMediaRunning.nftId !== nftId) {\n      return _renderDefaultBtn();\n    } // RENDER WHEN IS CURRENT\n\n\n    if (renderLoadingBtn) {\n      return renderLoadingBtn();\n    }\n\n    return \"Loading...\";\n  };\n\n  const _renderPlayingBtn = () => {\n    // RENDER DEFAULT IF IT NOT CURRENT\n    if (currentMediaRunning.nftId !== nftId) {\n      return _renderDefaultBtn();\n    } // RENDER WHEN IS CURRENT\n\n\n    if (renderPlayingBtn) {\n      return renderPlayingBtn();\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"z-10 bg-neutral-900 bg-opacity-60 rounded-full flex  items-center justify-center text-xl text-white border border-white w-11 h-11 cursor-pointer\",\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        className: \"w-5\",\n        src: iconPlaying,\n        alt: \"paused\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 7\n    }, this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `nc-ButtonPlayMusicRunningContainer select-none ${className}`,\n    \"data-nc-id\": \"ButtonPlayMusicRunningContainer\",\n    onClick: handleClickButton,\n    children: renderChildren ? renderChildren(currentMediaRunning.nftId === nftId, mediaState) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [(!mediaState || mediaState === \"paused\" || mediaState === \"ended\") && _renderDefaultBtn(), mediaState === \"playing\" && _renderPlayingBtn()]\n    }, void 0, true)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 149,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ButtonPlayMusicRunningContainer, \"MfwfiTbSl8N3M4+QwP1hNQ20okE=\", false, function () {\n  return [useAppSelector, useAppDispatch];\n});\n\n_c = ButtonPlayMusicRunningContainer;\nexport default ButtonPlayMusicRunningContainer;\n\nvar _c;\n\n$RefreshReg$(_c, \"ButtonPlayMusicRunningContainer\");","map":{"version":3,"names":["React","useEffect","useAppDispatch","useAppSelector","changeCurrentMediaRunning","changeStateMediaRunning","addNewIdListAudio","selectCurrentMediaRunning","iconPlaying","isSafariBrowser","ButtonPlayMusicRunningContainer","className","nftId","renderChildren","renderDefaultBtn","renderLoadingBtn","renderPlayingBtn","currentMediaRunning","dispatch","mediaState","state","handleClickNewAudio","handleClickNewAudioWhenMediaRunning","handleClickButton","mediaEl","document","getElementById","play","_renderDefaultBtn","_renderLoadingBtn","_renderPlayingBtn"],"sources":["/Users/ry1537/Documents/GitHub/rtc-web3/src/containers/ButtonPlayMusicRunningContainer.tsx"],"sourcesContent":["import React, { FC, ReactNode, useEffect } from \"react\";\r\nimport { useAppDispatch, useAppSelector } from \"app/hooks\";\r\nimport {\r\n  changeCurrentMediaRunning,\r\n  changeStateMediaRunning,\r\n  MediaRunningState,\r\n  addNewIdListAudio,\r\n  selectCurrentMediaRunning,\r\n} from \"app/mediaRunning/mediaRunning\";\r\nimport iconPlaying from \"images/icon-playing.gif\";\r\nimport isSafariBrowser from \"utils/isSafariBrowser\";\r\n\r\nexport interface ButtonPlayMusicRunningContainerProps {\r\n  className?: string;\r\n  nftId: string;\r\n  renderChildren?: (\r\n    isCurrentRunning: boolean,\r\n    state: MediaRunningState[\"state\"]\r\n  ) => ReactNode;\r\n  renderDefaultBtn?: () => ReactNode;\r\n  renderLoadingBtn?: () => ReactNode;\r\n  renderPlayingBtn?: () => ReactNode;\r\n}\r\n\r\nconst ButtonPlayMusicRunningContainer: FC<\r\n  ButtonPlayMusicRunningContainerProps\r\n> = ({\r\n  className = \"\",\r\n  nftId,\r\n  renderChildren,\r\n  renderDefaultBtn,\r\n  renderLoadingBtn,\r\n  renderPlayingBtn,\r\n}) => {\r\n  const currentMediaRunning = useAppSelector(selectCurrentMediaRunning);\r\n  const dispatch = useAppDispatch();\r\n\r\n  // STATE\r\n  const mediaState = currentMediaRunning.state;\r\n\r\n  //\r\n  useEffect(() => {\r\n    // check safari\r\n    if (!nftId || !isSafariBrowser()) {\r\n      return;\r\n    }\r\n    dispatch(addNewIdListAudio(nftId));\r\n\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [nftId]);\r\n  //\r\n\r\n  const handleClickNewAudio = () => {\r\n    return dispatch(\r\n      changeCurrentMediaRunning({\r\n        nftId: nftId,\r\n        state: \"playing\",\r\n        // state: \"loading\",\r\n      })\r\n    );\r\n  };\r\n\r\n  const handleClickNewAudioWhenMediaRunning = () => {\r\n    if (nftId === currentMediaRunning.nftId) {\r\n      return dispatch(\r\n        changeCurrentMediaRunning({\r\n          nftId,\r\n          state: \"playing\",\r\n        })\r\n      );\r\n    }\r\n    return dispatch(\r\n      changeCurrentMediaRunning({\r\n        nftId,\r\n        state: \"playing\",\r\n        // state: \"loading\",\r\n      })\r\n    );\r\n  };\r\n\r\n  const handleClickButton = () => {\r\n    // PLAYING MEDIA RUNNING FOR SAFARI\r\n    const mediaEl = document.getElementById(nftId) as HTMLVideoElement;\r\n    if (mediaEl) {\r\n      mediaEl.play();\r\n    }\r\n\r\n    // IF NOT EXIST MEDIA\r\n    if (!currentMediaRunning.nftId || !currentMediaRunning.state) {\r\n      return handleClickNewAudio();\r\n    }\r\n\r\n    // IF MEDIA RUNNING AND CLICK OTHER POST\r\n    if (currentMediaRunning.nftId !== nftId) {\r\n      return handleClickNewAudioWhenMediaRunning();\r\n    }\r\n\r\n    if (currentMediaRunning.state === \"playing\") {\r\n      return dispatch(changeStateMediaRunning(\"paused\"));\r\n    }\r\n\r\n    // if (currentMediaRunning.state === \"loading\") {\r\n    //   return;\r\n    // }\r\n\r\n    return dispatch(changeStateMediaRunning(\"playing\"));\r\n  };\r\n\r\n  const _renderDefaultBtn = () => {\r\n    if (renderDefaultBtn) {\r\n      return renderDefaultBtn();\r\n    }\r\n    return \"Media Icon...\";\r\n  };\r\n\r\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n  const _renderLoadingBtn = () => {\r\n    // RENDER DEFAULT IF IT NOT CURRENT\r\n    if (currentMediaRunning.nftId !== nftId) {\r\n      return _renderDefaultBtn();\r\n    }\r\n\r\n    // RENDER WHEN IS CURRENT\r\n    if (renderLoadingBtn) {\r\n      return renderLoadingBtn();\r\n    }\r\n    return \"Loading...\";\r\n  };\r\n\r\n  const _renderPlayingBtn = () => {\r\n    // RENDER DEFAULT IF IT NOT CURRENT\r\n    if (currentMediaRunning.nftId !== nftId) {\r\n      return _renderDefaultBtn();\r\n    }\r\n\r\n    // RENDER WHEN IS CURRENT\r\n    if (renderPlayingBtn) {\r\n      return renderPlayingBtn();\r\n    }\r\n\r\n    return (\r\n      <span className=\"z-10 bg-neutral-900 bg-opacity-60 rounded-full flex  items-center justify-center text-xl text-white border border-white w-11 h-11 cursor-pointer\">\r\n        <img className=\"w-5\" src={iconPlaying} alt=\"paused\" />\r\n      </span>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={`nc-ButtonPlayMusicRunningContainer select-none ${className}`}\r\n      data-nc-id=\"ButtonPlayMusicRunningContainer\"\r\n      onClick={handleClickButton}\r\n    >\r\n      {renderChildren ? (\r\n        renderChildren(currentMediaRunning.nftId === nftId, mediaState)\r\n      ) : (\r\n        <>\r\n          {(!mediaState || mediaState === \"paused\" || mediaState === \"ended\") &&\r\n            _renderDefaultBtn()}\r\n\r\n          {/* LOADDING ICON */}\r\n          {/* {mediaState === \"loading\" && _renderLoadingBtn()} */}\r\n\r\n          {/* PLAYING ICON */}\r\n          {mediaState === \"playing\" && _renderPlayingBtn()}\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ButtonPlayMusicRunningContainer;\r\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAA+BC,SAA/B,QAAgD,OAAhD;AACA,SAASC,cAAT,EAAyBC,cAAzB,QAA+C,WAA/C;AACA,SACEC,yBADF,EAEEC,uBAFF,EAIEC,iBAJF,EAKEC,yBALF,QAMO,+BANP;AAOA,OAAOC,WAAP,MAAwB,yBAAxB;AACA,OAAOC,eAAP,MAA4B,uBAA5B;;;;AAcA,MAAMC,+BAEL,GAAG,QAOE;EAAA;;EAAA,IAPD;IACHC,SAAS,GAAG,EADT;IAEHC,KAFG;IAGHC,cAHG;IAIHC,gBAJG;IAKHC,gBALG;IAMHC;EANG,CAOC;EACJ,MAAMC,mBAAmB,GAAGd,cAAc,CAACI,yBAAD,CAA1C;EACA,MAAMW,QAAQ,GAAGhB,cAAc,EAA/B,CAFI,CAIJ;;EACA,MAAMiB,UAAU,GAAGF,mBAAmB,CAACG,KAAvC,CALI,CAOJ;;EACAnB,SAAS,CAAC,MAAM;IACd;IACA,IAAI,CAACW,KAAD,IAAU,CAACH,eAAe,EAA9B,EAAkC;MAChC;IACD;;IACDS,QAAQ,CAACZ,iBAAiB,CAACM,KAAD,CAAlB,CAAR,CALc,CAOd;EACD,CARQ,EAQN,CAACA,KAAD,CARM,CAAT,CARI,CAiBJ;;EAEA,MAAMS,mBAAmB,GAAG,MAAM;IAChC,OAAOH,QAAQ,CACbd,yBAAyB,CAAC;MACxBQ,KAAK,EAAEA,KADiB;MAExBQ,KAAK,EAAE,SAFiB,CAGxB;;IAHwB,CAAD,CADZ,CAAf;EAOD,CARD;;EAUA,MAAME,mCAAmC,GAAG,MAAM;IAChD,IAAIV,KAAK,KAAKK,mBAAmB,CAACL,KAAlC,EAAyC;MACvC,OAAOM,QAAQ,CACbd,yBAAyB,CAAC;QACxBQ,KADwB;QAExBQ,KAAK,EAAE;MAFiB,CAAD,CADZ,CAAf;IAMD;;IACD,OAAOF,QAAQ,CACbd,yBAAyB,CAAC;MACxBQ,KADwB;MAExBQ,KAAK,EAAE,SAFiB,CAGxB;;IAHwB,CAAD,CADZ,CAAf;EAOD,CAhBD;;EAkBA,MAAMG,iBAAiB,GAAG,MAAM;IAC9B;IACA,MAAMC,OAAO,GAAGC,QAAQ,CAACC,cAAT,CAAwBd,KAAxB,CAAhB;;IACA,IAAIY,OAAJ,EAAa;MACXA,OAAO,CAACG,IAAR;IACD,CAL6B,CAO9B;;;IACA,IAAI,CAACV,mBAAmB,CAACL,KAArB,IAA8B,CAACK,mBAAmB,CAACG,KAAvD,EAA8D;MAC5D,OAAOC,mBAAmB,EAA1B;IACD,CAV6B,CAY9B;;;IACA,IAAIJ,mBAAmB,CAACL,KAApB,KAA8BA,KAAlC,EAAyC;MACvC,OAAOU,mCAAmC,EAA1C;IACD;;IAED,IAAIL,mBAAmB,CAACG,KAApB,KAA8B,SAAlC,EAA6C;MAC3C,OAAOF,QAAQ,CAACb,uBAAuB,CAAC,QAAD,CAAxB,CAAf;IACD,CAnB6B,CAqB9B;IACA;IACA;;;IAEA,OAAOa,QAAQ,CAACb,uBAAuB,CAAC,SAAD,CAAxB,CAAf;EACD,CA1BD;;EA4BA,MAAMuB,iBAAiB,GAAG,MAAM;IAC9B,IAAId,gBAAJ,EAAsB;MACpB,OAAOA,gBAAgB,EAAvB;IACD;;IACD,OAAO,eAAP;EACD,CALD,CA3EI,CAkFJ;;;EACA,MAAMe,iBAAiB,GAAG,MAAM;IAC9B;IACA,IAAIZ,mBAAmB,CAACL,KAApB,KAA8BA,KAAlC,EAAyC;MACvC,OAAOgB,iBAAiB,EAAxB;IACD,CAJ6B,CAM9B;;;IACA,IAAIb,gBAAJ,EAAsB;MACpB,OAAOA,gBAAgB,EAAvB;IACD;;IACD,OAAO,YAAP;EACD,CAXD;;EAaA,MAAMe,iBAAiB,GAAG,MAAM;IAC9B;IACA,IAAIb,mBAAmB,CAACL,KAApB,KAA8BA,KAAlC,EAAyC;MACvC,OAAOgB,iBAAiB,EAAxB;IACD,CAJ6B,CAM9B;;;IACA,IAAIZ,gBAAJ,EAAsB;MACpB,OAAOA,gBAAgB,EAAvB;IACD;;IAED,oBACE;MAAM,SAAS,EAAC,kJAAhB;MAAA,uBACE;QAAK,SAAS,EAAC,KAAf;QAAqB,GAAG,EAAER,WAA1B;QAAuC,GAAG,EAAC;MAA3C;QAAA;QAAA;QAAA;MAAA;IADF;MAAA;MAAA;MAAA;IAAA,QADF;EAKD,CAhBD;;EAkBA,oBACE;IACE,SAAS,EAAG,kDAAiDG,SAAU,EADzE;IAEE,cAAW,iCAFb;IAGE,OAAO,EAAEY,iBAHX;IAAA,UAKGV,cAAc,GACbA,cAAc,CAACI,mBAAmB,CAACL,KAApB,KAA8BA,KAA/B,EAAsCO,UAAtC,CADD,gBAGb;MAAA,WACG,CAAC,CAACA,UAAD,IAAeA,UAAU,KAAK,QAA9B,IAA0CA,UAAU,KAAK,OAA1D,KACCS,iBAAiB,EAFrB,EAQGT,UAAU,KAAK,SAAf,IAA4BW,iBAAiB,EARhD;IAAA;EARJ;IAAA;IAAA;IAAA;EAAA,QADF;AAsBD,CAjJD;;GAAMpB,+B;UAUwBP,c,EACXD,c;;;KAXbQ,+B;AAmJN,eAAeA,+BAAf"},"metadata":{},"sourceType":"module"}